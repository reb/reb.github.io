<!DOCTYPE html>
<html>
  <head>
    <title>Title</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      .remark-slide-content { background-size: 8em; }
      .remark-slide-content { font-size: 32px; }
      .remark-slide-content ul { list-style-type: square; }
      .remark-slide-content li { padding-bottom: 1em; }
      .remark-slide-number { display: none; }
      .remark-code, .remark-inline-code { font-size: inherit 36px; font-family: 'Ubuntu Mono'; }
      .remark-code-span-highlighted { color: red; } 
      
      .cols { display: flex; }

      .fifty { flex: 50%; }
      .twenty { flex: 20%; }
      .title-text { color: white; padding-top: 13%; }
      .rust-logo { padding-left: 45% }

      .console { background-color: black; color: white; padding: 0.5em; }
      .console .remark-code-span-highlighted { background-color: white; }
      .bluepill img { width: 60%; }
      .arrow img { width: 10%; padding-bottom: 9%; }
      .logo img { width: 26%; }
      .full img { width: 100%; }
    </style>
  </head>
  <body>
    <textarea id="source">




background-image: url(./codemotion/Opening%20slides%201.png)
background-size: 100%

???
Trainer: Welcome to this workshop, but before starting let me say some words related to the conference. Don't forget to join today - tomorrow and on the 21st of October from  2 to 7 PM CEST to check out  the great talks and speakers.
The conference is focused on 3 macto-topic (SA and cybersecurity, Frontend and design and AI/ML and effective devs and teams) and make sure not to miss today's special deep dive into the techie world of (TOPIC OF THE DAY):
Each day is focused on a macro-topic:

October 20th ? Software Architecture and Cybersecurity

October 21st ? Front-End and Design

October 22nd ? AI/ML and Effective developers and teams


---

background-image: url(./codemotion/Opening%20slides%202.png)
background-size: 100%

???

Trainer: Please find here the link to check out the great agenda for the 3-day conference and let's move to the workshop now

---

background-image: url(./codemotion/Opening%20slides%203.png)
background-size: 100%

???

Trainer: Our way of communication is through the dedicated Discord channel, so please make sure to leave me all you questions there and I'll answer them 

---

background-image: url(./codemotion/Opening%20slides%204.png)
background-size: 100%

???

Trainer: Of course don't forget that Codemotion is committed to holding a conference/workshops that reflects the diversity of its community and provides harassment-free experience for everyone...and now let's start

---

name: title-slide

background-image: url(./codemotion/CO20_slide%20speakers.png)
background-size: 100%

.title-text[

# The reason Rust is the best language ever

Ruben Boumans (reb)
]

.rust-logo[![](https://upload.wikimedia.org/wikipedia/commons/d/d5/Rust_programming_language_black_logo.svg)]

---

class: center, middle

# About me

---

class: center, middle

# About Rust

.logo[![stackoverflow](logo-stackoverflow.svg)]

.cols[

.twenty[
2016
.full[![2016](survey-2016.png)]
]

.twenty[
2017
.full[![2017](survey-2017.png)]
]

.twenty[
2018
.full[![2018](survey-2018.png)]
]

.twenty[
2019
.full[![2019](survey-2019.png)]
]

.twenty[
2020
.full[![2020](survey-2020.png)]
]
]

???
Loved means % of developers that work with and want to continue working with a technology.

---

# Wikipedia agrees
.full[![Rust wikipedia](wikipedia-rust.png)]



---

template: title-slide

---

# Jargon 

.cols[
.fifty[
# Java

developer

port code

java-like
]
.fifty[
# Rust

Rustacean

Oxidizing

Rustic
]
]

---

class: center, middle
# Ferris
![](https://rustbridge.github.io/a-very-brief-intro-to-rust/img/ferris.gif)

???
ferris: ablative plural of ferrum

---

class: center, middle
# Questions?

---

class: center, middle
# No questions!

---

name: end-slide

background-image: url(./codemotion/Closing%20slide.png)
background-size: 100%

---

template: title-slide

---

# Modern language

- Made for hard problems
- Young
- Multi-platform
- Quick development

???
Hard problems; able to do anything you want, direct memory pointers without the risk of segfaults, blazingly fast
Moore is over! speed will start mattering again (https://spectrum.ieee.org/view-from-the-valley/computing/hardware/david-patterson-says-its-time-for-new-computer-architectures-and-software-languages)

Young; Java 1995, C++ 1985, C 1972, Python 1990, Ruby 1995, Haskell 1990, Scala 2004, Rust 2010, Kotlin 2011

Platforms; compiles to binaries, for anything, thanks to LLVM

Quick development; 6 week development cycles, often things in beta will be stable the next time you touch your side project

---

# Install rust

Go to [rust-lang.org](https://rust-lang.org) and click Install

---

template: title-slide

---

# `rustup` & `cargo`

- Automatically managed toolchain
- Easy package inclusion
- New project creation
- `rustup docs`

???
Besides a compiler what did you get by installing?

---

# Create a project

```shell
> cargo new helloworld
```

Check out the project folder

---

# Run your project

in `src/`

```shell
> rustc main.rs
> main.exe  // Windows
> ./main  // Linux/MacOS
```

Or

```shell
> cargo run 
```

---

# Assignment

Add a `load_file` function that returns a boolean

Hint: `()` is the unit/void representation

???
Use Google

---

# The Rust compiler

Who gets this warning?
.console[```
warning: function is never used: \`load_file`
 --> src\main.rs:4:1
  |
4 | fn load_file() -> bool {
  | ^^^^^^^^^^^^^^^^^^^^^^
  |
  = `note: #[warn(dead_code)] on by default`
```]

---

# The Rust compiler

- Warns
- Suggests
- Explains
- Teaches
- Challenges

???
W - You've created a function that's not used

S - This variable was not found, but something that looks like it was, did you mean that?

E - What are you trying to do that's not allowed

T - Instead of saying wrong! it's messages are more helpful

C - If the compiler fights you, you have to think better about what you're doing

---

# Variables - immutable

```rust
let m = 1;
m = 2;
```

.console[```
error[E0384]: cannot assign twice to immutable variable \`m`
 --> src\main.rs:3:5
  |
2 |     let m = 1;
  |         - first assignment to \`m`
3 |     m = 2;
  |     `^^^^^ cannot assign twice to immutable variable`
```]

---

# Variables - type inference

```rust
let mut m = 1;
m = true;
```

.console[```
error[E0308]: mismatched types
 --> src\main.rs:3:9
  |
3 |     m = true;
  |         `^^^^ expected integral variable, found bool`
  |
  = note: expected type \`{integer}`
             found type \`bool`
```]

---

# Automatic return

```rust
fn load_file() -> bool {
    true;
}
```

.console[```
error[E0308]: mismatched types
 --> src\main.rs:6:24
  |
  |   fn load_file() -> bool {
  |  ________________________^
  | |     true;
  | |         `- help: consider removing this semicolon`
  | | }
  | |_^ expected bool, found ()
  |
  = note: expected type \`bool`
             found type \`()`
```]

---
# `enum`

```rust
enum TaxBracket {
    low,
}
```

.console[```
warning: variant `low` should have an upper camel case name
  --> src\main.rs:29:5
   |
   |     low,
   |     ^^^ help: convert the identifier to upper camel case: `Low`
```]

---


# `match`

```rust
fn tax_bracket(income: u32) -> TaxBracket {
    let bracket = match income {
        0 | 1 => TaxBracket::Exempt,
        2..=10 => TaxBracket::Low,
    };
    return bracket;
}
```

.console[```
error[E0004]: non-exhaustive patterns: `11u32..=u32::MAX` not covered
  --> src\main.rs:32:25
   |
   |     let bracket = match income {
   |                         ^^^^^^ pattern `11u32..=u32::MAX` not covered
```]

---

# `match` - working
```rust
fn tax_bracket(income: u32) -> TaxBracket {
    let bracket = match income {
        0 | 1 => TaxBracket::Exempt,
        2..=10 => TaxBracket::Low,
        `_ => TaxBracket::High,`
    };
    return bracket;
}
```

---

# Assignment

Change the `load_file` function.

Let it return a string

---

# `&str` & `String`

.console[```
  = note: expected type \`std::string::String`
             found type \`&'static str`
```]

2 options
- Keep `&str` and handle lifetime
- Convert with `.to_string()`

---

# `Struct` & `Trait`

- Not objects
- Composition instead of inheritance

---

# `Struct` & `Trait`

.cols[
.fifty[
## Composition
```rust
trait Surface {
    fn area(&self) -> f64;
}

struct Circle {
    radius: f64,
}

impl Surface for Circle {
  fn area(&self) -> f64 {
    // stuff
  }
}

```
]

.fifty[
## Inheritance
```java
abstract class Shape {
  float area();
}

class Circle extends Shape {
  float radius;
  
  float area() {
    // stuff
  }
}

```
]
]

---

# `Option`

- Forces handling potential empty returns
- `Option<Type>` can be `Some(Type)` or `None`
- `expect("error message when None")`
- `unwrap()`

---

# `Option` & `match`

```rust
let optional_item = Some(1); // type: Option<i32>

match optional_item {
    Some(item) => process(item),
    None => fallback()
}
```

---

# `Result`

- Forces handling potential exceptions
- `Result<Type, Error>` can be `Ok(Type)` or `Err(Error)`
- `expect("error message if error")`
- convert to `Option` with `ok()`

---

# `Result` & `match`

```rust
fn function_with_potential_error() -> Result<i32, &str> {
    Err("Function not implemented")
}

let i = match function_with_potential_error() {
    Ok(number) => number,
    Err(message) => {
        println!("Failed because: {}, using 0", message);
        0
    }
};
```

---

# Assignment

Make a function that converts a string `"banana, 21"` to a `Fruit` struct.

```rust
// derive auto-implements simple features
#[derive(Debug, PartialEq, Eq)] 
struct Fruit {
    name: String,
    amount: u32,
}

fn convert_to_fruit(line: &str) -> Result<Fruit, &str> {
    Err("Function not implemented")
}
```
---

# Run a test

- `cargo test`
```rust
#[test]
fn test_convert_to_fruit() {
    let fruit = convert_to_fruit("banana, 21");

    let name = "banana".to_string();
    let amount = 21;
    let expected = Ok(Fruit { name, amount });
    assert_eq!(fruit, expected);
}
```
slides are on [reb.github.io]()


---

# Closures

```rust
let plus_one = |x: i32| x + 1;

let plus_two = |x| {
    let mut result: i32 = x;
    result += 2;

    result
}; 
```

---

# Iteration

```rust
 fn sum_of_squares(input: &Vec<i32>) -> i32 {
   input.iter()
        .map(|&i| i * i)
        .sum()
 }
```

```rust
fn sum_of_squares(input: &Vec<i32>) -> i32 {
    let mut sum = 0;
    for i in input.iter() {
        sum += i * i;
    }
    sum
}
```

---

# Parallel processing

.cols[
.fifty[
## Sequential
```rust


 fn sum_of_squares(input: &Vec<i32>)
                         -> i32 {
   input.iter()
        .map(|&i| i * i)
        .sum()
 }
```
]

.fifty[
## Parallel
```rust
 `use rayon::prelude::*;`

 fn sum_of_squares(input: &Vec<i32>)
                         -> i32 {
   input.`par_`iter()
        .map(|&i| i * i)
        .sum()
 }
```
]
]

---

# Sanity check

.logo[![](https://upload.wikimedia.org/wikipedia/commons/d/d5/Rust_programming_language_black_logo.svg)]
.arrow[![](https://www.svgrepo.com/show/57141/right-arrow.svg)]
.bluepill[![](blue-pill.jpg)]

.logo[![](https://upload.wikimedia.org/wikipedia/commons/d/d5/Rust_programming_language_black_logo.svg)]
.arrow[![](https://www.svgrepo.com/show/57141/right-arrow.svg)]
.logo[![](1200px-WebAssembly_Logo.svg.png)]

---

# Ownership

- Passing variables gives ownership
- `&` passes borrowed (read-only)
```rust
HashMap.get(`&`key)
```



---

# Lifetime

- Indicate how long variables exist

```rust
fn tokenize<`'a`>(code: &`'a` str) -> impl Iterator<Item=&`'a` str> {
    ...
}
```
[source](https://www.brandonsmith.ninja/blog/favorite-rust-function)
---

# Fruit vote counter

Combine and sort favourite fruit votes from an input file like:

.cols[
.fifty[
Input
```
apple, 5
banana, 10
kiwi, 1
banana, 3
```
]

.fifty[
Output
```
banana, 13
apple, 5
kiwi, 1
```
]
]

---

class: center, middle

# Thanks for coming!

Feel free to rate or give feedback!

reboumans@gmail.com

---

template: end-slide


    </textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create({
	highlightSpans: true
      });
    </script>
  </body>
</html>
